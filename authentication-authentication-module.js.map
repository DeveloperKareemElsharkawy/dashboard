{"version":3,"sources":["./src/app/authentication/404/not-found.component.ts","./src/app/authentication/404/not-found.component.html","./src/app/authentication/authentication.routing.ts","./src/app/authentication/authentication.module.ts","./src/app/authentication/login/login.component.ts","./src/app/authentication/login/login.component.html"],"names":[],"mappings":"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","file":"authentication-authentication-module.js","sourcesContent":["import { NbMenuService } from '@nebular/theme';\nimport { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-not-found',\n  templateUrl: './not-found.component.html',\n  styleUrls: ['./not-found.component.scss'],\n})\nexport class NotFoundComponent {\n\n  constructor(private menuService: NbMenuService) {\n  }\n\n  goToHome() {\n    this.menuService.navigateHome();\n  }\n}\n","<div class=\"row\">\n  <div class=\"col-md-12\">\n    <div class=\"card-body\">\n      <h2 class=\"title\">404 Page Not Found</h2>\n      <small class=\"sub-title\">The page you were looking for doesn't exist</small>\n      <button type=\"button\" class=\"btn btn-danger btn-lg btn-block\">Take me home</button>\n    </div>\n  </div>\n</div>","import { Routes } from '@angular/router';\nimport {LoginComponent} from './login/login.component';\nimport {NotFoundComponent} from './404/not-found.component';\n\n\nexport const AuthenticationRoutes: Routes = [\n  {\n    path: '',\n    children: [\n      {\n        path: '',\n        redirectTo: 'login',\n      },\n      {\n        path: '404',\n        component: NotFoundComponent,\n      },\n      {\n        path: 'login',\n        component: LoginComponent,\n      },\n    ],\n  },\n];\n","import { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { CommonModule } from '@angular/common';\nimport { AuthenticationRoutes } from './authentication.routing';\nimport { LoginComponent } from './login/login.component';\nimport { SharedModule } from '../shared/shared.module';\nimport { NotFoundComponent} from './404/not-found.component';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    SharedModule,\n    RouterModule.forChild(AuthenticationRoutes),\n  ],\n  declarations: [\n    LoginComponent,\n    NotFoundComponent,\n  ],\n})\nexport class AuthenticationModule {}\n","import { ChangeDetectorRef, Component, OnInit, ViewChild } from '@angular/core';\nimport { LoginService } from '../../services/login/login.services';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { LocalStorageHandler } from '../../lib/local-storage/LocalStorageHandler';\nimport { spreadObjOfArrs } from '../../lib/spreadObjOfArrs';\nimport { PermissionsService } from '../../services/permissions/permissions.services';\n\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.scss'],\n})\nexport class LoginComponent implements OnInit {\n  public email;\n  public password;\n  public isLoading = false;\n  public errorMessage = '';\n  public returnUrl;\n\n  protected options: {};\n  protected cd: ChangeDetectorRef;\n  errors: string[];\n  messages: string[];\n  user: any;\n\n  constructor(\n    private loginService: LoginService,\n    private router: Router,\n    private route: ActivatedRoute,\n    private loadPermissions: PermissionsService,\n  ) {\n  }\n\n  ngOnInit() {\n    this.email = '';\n    this.password = '';\n    this.returnUrl = this.route.snapshot.queryParams.returnUrl || '/dashboard';\n  }\n\n  login() {\n    this.errorMessage = '';\n    const loginState = this.validateLogin();\n    if (loginState.status) {\n      this.isLoading = true;\n      this.loginService.login({ email: this.email, password: this.password }).subscribe(\n        async res => {\n          const handler = new LocalStorageHandler();\n          handler.setItem('admin', JSON.stringify(res['data']));\n\n          const permissions = await this.loadPermissions.getPermissionsForAdmin().toPromise();\n          handler.setItem(\n            'userPermissions',\n            JSON.stringify(permissions['data']['admin_permissions'])\n          );\n\n          this.loginService.LoggedIn = true;\n          this.isLoading = false;\n          if (this.returnUrl) {\n            this.router.navigateByUrl(this.returnUrl);\n          }\n          this.router.navigateByUrl('/dashboard');\n        },\n        error => {\n          this.isLoading = false;\n          this.errorMessage = error.error.message;\n        }\n      );\n    } else {\n      this.isLoading = false;\n      this.errorMessage = loginState['message'];\n    }\n  }\n\n  private validateLogin() {\n    const state = {\n      status: true,\n      message: '',\n    };\n\n    if (this.email === '') {\n      state.status = false;\n      state.message = 'Please Choose an Email';\n    }\n\n    if (this.password === '') {\n      state.status = false;\n      state.message = 'Please select a password';\n    }\n    return state;\n  }\n}\n\n","<h1 id=\"title\" class=\"title\">Login</h1>\n<p class=\"sub-title\">Hello! Log in with your email.</p>\n\n<div *ngIf=\"errorMessage.length > 0\" class=\"alert alert-danger\" role=\"alert\">{{ errorMessage }}</div>\n\n\n<div class=\"form-control-group\">\n  <label class=\"label\" for=\"input-email\">Email address:</label>\n  <input\n    class=\"form-control\"\n         [(ngModel)]=\"email\"\n         name=\"email\"\n         id=\"input-email\"\n         pattern=\".+@.+\\..+\"\n         placeholder=\"Email address\"\n         autofocus>\n</div>\n\n<div class=\"form-control-group\">\n  <label class=\"label\" for=\"input-password\">Password:</label>\n  <input class=\"form-control\"\n          [(ngModel)]=\"password\"\n          name=\"password\"\n         type=\"password\"\n         id=\"input-password\"\n         placeholder=\"Password\">\n\n</div>\n\n<button class=\"btn btn-secondary btn-lg btn-block\" (click)=\"login()\" [disabled]=\"isLoading\">Log In</button>\n"],"sourceRoot":"webpack:///"}